<div style="text-align:center;padding:20px;font-family:Arial,sans-serif;" id="premioApp">
  <h2 style="color:#FF6B00;margin-bottom:30px;">¡Verifica tu premio!</h2>
  
  <div id="resultadoPremio" style="padding:20px;background:#f8f8f8;border-radius:10px;margin-bottom:20px;">
    <p id="mensajePremio">Analizando tu producto...</p>
    <p id="valorPremio" style="font-size:32px;font-weight:bold;color:#FF6B00;margin:10px 0;"></p>
  </div>
  
  <div id="formularioReclamo" style="display:none;background:white;padding:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);max-width:400px;margin:0 auto;">
    <h3 style="margin-top:0;">¡Felicidades!</h3>
    <input type="text" placeholder="Nombre completo" style="width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:5px;">
    <input type="email" placeholder="Email" style="width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:5px;">
    <button onclick="alert('Premio registrado con éxito');" style="background:#FF6B00;color:white;border:none;padding:12px;width:100%;border-radius:5px;margin-top:10px;cursor:pointer;">Reclamar Premio</button>
  </div>
</div>

<script>
// Versión ultra-compatible con Wix (funciona al 100%)
(function() {
  // Configuración de premios
  var premiosConfig = {
    '0': 40,   // 40% sin premio
    '1': 25,   // 25% $1
    '5': 15,   // 15% $5
    '10': 10,  // 10% $10
    '20': 5,   // 5% $20
    '50': 3,   // 3% $50
    '100': 2   // 2% $100
  };
  
  // Obtener parámetro de prueba
  function getTestParam() {
    try {
      var params = window.location.search.substring(1).split('&');
      for(var i = 0; i < params.length; i++) {
        var pair = params[i].split('=');
        if(pair[0] == 'test') return pair[1];
      }
    } catch(e) {
      return null;
    }
    return null;
  }
  
  // Mostrar resultado
  function mostrarResultado(monto) {
    var mensaje = document.getElementById('mensajePremio');
    var valor = document.getElementById('valorPremio');
    var formulario = document.getElementById('formularioReclamo');
    
    if(monto == 0) {
      mensaje.innerHTML = 'Esta vez no has ganado';
      valor.innerHTML = '';
      formulario.style.display = 'none';
    } else {
      mensaje.innerHTML = '¡Has ganado!';
      valor.innerHTML = '$' + monto;
      formulario.style.display = 'block';
    }
  }
  
  // Asignar premio aleatorio
  function asignarPremio() {
    var testVal = getTestParam();
    if(testVal !== null) {
      mostrarResultado(parseInt(testVal));
      return;
    }
    
    var random = Math.random() * 100;
    var acumulado = 0;
    
    for(var monto in premiosConfig) {
      acumulado += premiosConfig[monto];
      if(random <= acumulado) {
        mostrarResultado(parseInt(monto));
        return;
      }
    }
    
    mostrarResultado(0);
  }
  
  // Retraso para asegurar carga en Wix
  setTimeout(asignarPremio, 500);
})();
</script>
